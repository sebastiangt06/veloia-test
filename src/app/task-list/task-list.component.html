<div class="task-title">
  <h1>Lista de Tareas!</h1>
</div>

<div class="filters-section">
  <h3>Filtros</h3>
  <div class="buttons-filters">
    <button mat-stroked-button color="primary" (click)="setFilter('all')" [class.active]="filter === 'all'">Todos</button>
    <button mat-stroked-button color="primary" (click)="setFilter('completed')" [class.active]="filter === 'completed'">Completadas</button>
    <button mat-stroked-button color="primary" (click)="setFilter('pending')" [class.active]="filter === 'pending'">Pendientes</button>
  </div>

  <div *ngIf="filteredTasks.length > 0;">
    <mat-list *ngFor="let task of filteredTasks;">
      <mat-list-item>
        <span matListItemTitle class="task-title">{{task.title}} - {{task.date}}</span>
        <div>
          <span matListItemLine class="persons-tasks">Personas asociadas:</span>
          
          <div *ngIf="task.persons.length > 0">

            <div *ngFor="let person of task.persons" class="person-section">

              <span matListItemLine class="person-name">{{person.fullName}}:</span>
              
              <span matListItemLine class="abilities-class">Habilidades:
                <span *ngFor="let skill of person.abilities; let j = index" class="abilities">
                  {{skill}}<span *ngIf="j < person.abilities.length - 1">, </span>
                </span>
              </span>
            </div>
          </div>
        
          <!-- BotÃ³n de completar tarea -->
           <div class="mat-button">
          <button  mat-raised-button color="accent" (click)="markAsCompleted(task)" [disabled]="task.completed">Completar</button>
          </div>
        </div>
        
      </mat-list-item>
      <mat-divider></mat-divider>
    </mat-list>

  </div>

</div>
